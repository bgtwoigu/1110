#ifndef AEEIAPPLET_H
#define AEEIAPPLET_H

#include "AEEIBase.h"
#include "AEEEvent.h"

//********************************************************************************************************************************
//
// IApplet Interface...
//
//********************************************************************************************************************************

#define AEEIID_IApplet 0x01010100

#define INHERIT_IApplet(iname) \
   INHERIT_IBase(iname); \
   boolean  (*HandleEvent)(iname * po, AEEEvent evt, uint16 wp, uint32 dwp)

AEEINTERFACE_DEFINE(IApplet);

static __inline uint32 IApplet_AddRef(IApplet *me) {
   return AEEGETPVTBL(me, IApplet)->AddRef(me);
}
static __inline uint32 IApplet_Release(IApplet *me) {
   return AEEGETPVTBL(me, IApplet)->Release(me);
}
static __inline boolean IApplet_HandleEvent(IApplet *me, AEEEvent evt, uint16 wp, uint32 dwp) {
   return AEEGETPVTBL(me, IApplet)->HandleEvent(me, evt, wp, dwp);
}

/*=======================================================================
 INTERFACES DOCUMENTATION
=======================================================================

IApplet Interface

The IApplet Interface is the interface that handles events in the Application Execution
Environment (AEE). The interface is derived from IBase and implements a simple event
handling routine. This routine is called by the AEE Shell in response to events
generated by the system, other components, or applets. All applets in the BREW AEE
must implement this interface. In other words, a BREW applet is a class that implements
the IApplet Interface. IApplet_HandleEvent() is used by the BREW AEE Shell for sending
events to the applet.


NOTE: IApplet_HandleEvent() can be called only by the AEE Shell. Events sent by
other applets or components can be sent by ISHELL_SendEvent().

The following header file is required:~
AEE.h
=======================================================================
IApplet_AddRef()

Description:
    This function is inherited from IBase_AddRef().

Version:
   Introduced BREW Client 1.0

See Also:
    IApplet_Release()
=======================================================================
IApplet_Release()

Description:
    This function is inherited from IBase_Release().

Version:
   Introduced BREW Client 1.0

See Also:
    IApplet_AddRef()
=======================================================================

IApplet_HandleEvent()

Description:
    This function provides the main event processing for a BREW applet.
    It is called when any event is passed to the applet. Events can
    include system-level notifications, keypress events, and so on.
    System alarms or system notifications call this function to respond.
    If the applet is not currently running, the applet is loaded and the
    event is sent to the applet. The EVT_APP_STOP event is not sent to the
    applet, and unless the applet starts itself, the applet terminates after
    the completion of the event. The IApplet_HandleEvent() function must be
    implemented by all applets. The IApplet_HandleEvent() function is also
    used to support applet startup, shutdown, suspend, and resume.

Prototype:
    boolean IApplet_HandleEvent
    (
    IApplet * pIApplet,
    AEEEvent evt,
    uint16 wp,
    uint32 dwp
    )

Parameters:
    pIApplet : Pointer to the IApplet Interface object.
    evt : Event code.
    wp : 16-bit event-specific parameter.
    dwp : 32-bit event-specific parameter.

Return Value:
    TRUE, If the event was handled by the applet.

    FALSE, if otherwise.~
    It is very important to return FALSE if the operation did not process
    the event. This allows the AEE to do further processing of the event.
    A typical example occurs when the AVK_CLR key is received. If the application
    did not handle the event, the return of FALSE helps the AEE close the application.

Comments:
    This function can be called only by the AEE Shell.

Version:
   Introduced BREW Client 1.0

See Also:
    ISHELL_SendEvent()
    AEEEvent


=======================================================================*/

#endif //AEEIAPPLET_H
