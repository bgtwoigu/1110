/*=============================================================================
                      U I _ C A L L C T R L _ C L N T . C

GENERAL DESCRIPTION
  This is an AUTO GENERATED file that provides RPC client functionality for the
  ui_callctrl API.

Copyright (c) 2007 by QUALCOMM, Incorporated. All Rights Reserved.
=============================================================================*/

/*=============================================================================

                              Edit History

                             AUTO GENERATED                                  */
#ifdef FEATURE_HTORPC_METACOMMENTS
/* Generated by following versions of Htorpc modules:
Id: //depot/asic/msm7500/tools/build/htorpc/htorpc.pl#11 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/Start/Start.pm#36 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/Htoxdr/Htoxdr.pm#35 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/XDR/00.01/XDR.pm#34 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/Output/00.03/Output.pm#18 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/Parser/Parser.pm#26 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/Metacomments/Metacomments.pm#34 
Id: //depot/asic/msm7500/tools/build/htorpc/Htorpc/SymbolTable/SymbolTable.pm#25  */
#endif
/* $Id: //depot/asic/msmshared/apps/Core/rpc/ui_callctrl_clnt.c#1 $
=============================================================================*/

#include "customer.h"
#include "target.h"

#ifdef FEATURE_ONCRPC
#ifdef FEATURE_EXPORT_UI_CALLCTRL

/* Include files */
#include "err.h"
#include "msg.h"

#include "ui_callctrl.h"
#include "ui_callctrl_rpc.h"

/* Only one copy needed per API */
static opaque_auth Ui_callctrlCred = { ONCRPC_AUTH_NONE, 0, 0 };
static opaque_auth Ui_callctrlVerf = { ONCRPC_AUTH_NONE, 0, 0 };


/*=======================================================================
             API RPC Clients Implementation
=======================================================================*/

void ui_callctrl_null(void)
{

  xdr_s_type *clnt;
  rpc_reply_header reply_header;

  clnt = rpc_clnt_lookup();

  if ( clnt == NULL ) {
    ERR_FATAL( "ui_callctrl_null: No client for task %d", rex_self(), 0, 0);
  }

  oncrpcxdr_mem_free( clnt );

  XDR_ERRCHK( clnt, ON );

  do {
    (void) xdr_call_msg_start( clnt,
                               UI_CALLCTRLPROG, UI_CALLCTRLVERS,
                               ONCRPC_UI_CALLCTRL_NULL_PROC, &Ui_callctrlCred, &Ui_callctrlVerf );
  } while ( ! XDR_MSG_SEND( clnt, &reply_header ) );

  if ( reply_header.stat != RPC_MSG_ACCEPTED ) {

    ERR_FATAL( "ui_callctrl_null: RPC call rejected, reject status = %d",
               reply_header.u.dr.stat, 0, 0 );

  } else if ( reply_header.u.ar.stat != RPC_ACCEPT_SUCCESS ) {

    ERR_FATAL( "ui_callctrl_null: Error on server side, error status = %d",
               reply_header.u.ar.stat, 0, 0 );

  }

  (void) XDR_MSG_DONE( clnt );

  XDR_ERRCHK( clnt, OFF );

} /* ui_callctrl_null */

void ui_set_restrictions(byte restriction_bitmask)
{
  xdr_s_type *clnt;
  rpc_reply_header reply_header;

  clnt = rpc_clnt_lookup();

  if ( clnt == NULL ) {
    ERR_FATAL( "ui_set_restrictions: No client for task %d", rex_self(), 0, 0);
  }

  oncrpcxdr_mem_free( clnt );

  XDR_ERRCHK( clnt, ON );

  do {

    (void) xdr_call_msg_start( clnt,
                               UI_CALLCTRLPROG, UI_CALLCTRLVERS,
                               ONCRPC_UI_SET_RESTRICTIONS_PROC, &Ui_callctrlCred, &Ui_callctrlVerf );

    (void) XDR_SEND_UINT8( clnt, &restriction_bitmask );


  } while ( ! XDR_MSG_SEND( clnt, &reply_header ) );

  if ( reply_header.stat != RPC_MSG_ACCEPTED ) {

    ERR_FATAL( "ui_set_restrictions: RPC call rejected, reject status = %d",
               reply_header.u.dr.stat, 0, 0 );

  } else if ( reply_header.u.ar.stat != RPC_ACCEPT_SUCCESS ) {

    ERR_FATAL( "ui_set_restrictions: Error on server side, error status = %d",
               reply_header.u.ar.stat, 0, 0 );

  }

  (void) XDR_MSG_DONE( clnt );

  XDR_ERRCHK( clnt, OFF );


} /* ui_set_restrictions */


/*=======================================================================
             API Callbacks RPC Server Implementation
=======================================================================*/

void ui_callctrlcb_app_init( void )
{

  ui_callctrlcb_app_init_with_proxy( NULL );

} /* ui_callctrlcb_app_init */


void ui_callctrlcb_app_init_with_proxy( oncrpc_proxy_task_s_type *proxy ) {
} /* ui_callctrlcb_app_init_with_proxy */

void ui_callctrlcb_app_lock( boolean lock ){
} /* ui_callctrlcb_app_enable */

#endif /* FEATURE_EXPORT_UI_CALLCTRL */
#endif /* FEATURE_ONCRPC */
